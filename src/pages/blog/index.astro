---
import BaseLayout from '../../layouts/BaseLayout.astro';
import PagePostCount from '../../components/posts/PagePostCount.astro';
import PostSummary from "../../components/posts/PostSummary.astro";

import getPosts from "../../utils/getPosts";

const allPosts = getPosts().sort((a, b) => new Date(b.frontmatter.publishDate).valueOf() - new Date(a.frontmatter.publishDate).valueOf());

const title = 'Blog';
const description = 'Latest articles.';
const permalink = `${Astro.site.href}blog`;

---

<BaseLayout title={title} description={description} permalink={permalink} current="blog">
  <div class="container post-list">
    <h1>Recent Posts</h1>
    <PagePostCount postCount={allPosts.length} class="post-count" />
    <ul>
    {allPosts.map((post, _) => (
        <PostSummary post={post} />
    ))}
    </ul>
  </div>
</BaseLayout>
